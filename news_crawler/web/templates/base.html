<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}VN News{% endblock %}</title>
  <style>
  /* ===========
     PALETTE
     =========== */
  :root{
    /* Light theme */
    --bg: #f7f8fb;
    --bg-gradient: linear-gradient(180deg,#fbfdff 0%,#f4f6f9 100%);
    --card:#ffffff;
    --text:#0f172a;     /* slate-900 */
    --muted:#677089;    /* slate-500-ish */
    --brand:#0ea5e9;    /* sky-500 */
    --brand-600:#0284c7;
    --ring:#d7dde7;
    --border:#e6e9f0;
    --accent:#0ea5e9;
    --shadow: 0 6px 24px rgba(2,8,23,.08);
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg:#0b1220;
      --bg-gradient: radial-gradient(1200px 800px at 10% -10%, #0b1220 0%, #0b1220 60%) , linear-gradient(180deg,#0b1220 0%, #0e1728 100%);
      --card:#0f172a;
      --text:#e5e7eb;
      --muted:#9aa3b2;
      --brand:#38bdf8;   /* sky-400 */
      --brand-600:#0ea5e9;
      --ring:#253042;
      --border:#1f2937;
      --accent:#38bdf8;
      --shadow: 0 8px 28px rgba(0,0,0,.45);
    }
  }

  /* Reset & base */
  *{box-sizing:border-box}
  html,body{
    margin:0;padding:0;
    background: var(--bg-gradient);
    color:var(--text);
    font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue","Noto Sans",Arial;
  }
    .header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;       /* nổi trên các phần khác */
    background: var(--card);
    border-bottom: 1px solid var(--border);
    padding: 12px 24px;  /* thu gọn chút cho giống taskbar */
    margin: 0;           /* bỏ margin-bottom vì đã fixed */
  }

  #progress-bar {
    position: fixed;
    top: 0;               /* nằm ngay dưới header */
    left: 0;
    height: 4px;
    background: #38bdf8;
    width: 0%;
    z-index: 999;         /* dưới header một bậc */
    transition: width 0.2s ease;
}


  /* Để giữ khoảng trống cho nội dung bên dưới header */
  body {
    padding-top: 72px; /* đúng bằng chiều cao header */
  }
  a{color:var(--brand);text-decoration:none}
  a:hover{color:var(--brand-600)}
  a:focus-visible{outline:2px solid var(--brand);outline-offset:2px;border-radius:6px}

  .container{max-width:1100px;margin:0 auto;padding:24px}
  .header{display:flex;gap:18px;align-items:center;justify-content:space-between;margin-bottom:18px}
  .brand{font-weight:800;font-size:22px;color:var(--text)}
  .search{flex:1;display:flex;justify-content:center}
  .search form{width:100%;max-width:680px;display:flex;gap:8px}
  .search input,
  .search select{
    padding:12px 14px;border-radius:12px;border:1px solid var(--ring);
    background:var(--card);color:var(--text);outline:0;font-size:15px;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
  }
  .search input{flex:1}
  .search select{min-width:130px}
  .search input:focus, .search select:focus{
    border-color:var(--brand);box-shadow:0 0 0 3px color-mix(in oklab, var(--brand) 25%, transparent);
  }

  .nav{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}

  /* Chip */
  a.chip{color:inherit}
  .chip{
    display:inline-block;padding:6px 12px;border-radius:999px;border:1px solid var(--border);
    background: color-mix(in oklab, var(--brand) 7%, var(--card));
    color:var(--text);font-size:13px;transition:all .18s ease;
  }
  .chip:hover{
    border-color:var(--brand);
    background: color-mix(in oklab, var(--brand) 14%, var(--card));
  }
  .chip:focus-visible{outline:2px solid var(--brand);outline-offset:2px}

  .muted{color:var(--muted)}
  .grid{display:grid;gap:16px}
  .grid.cards{grid-template-columns:repeat(1,minmax(0,1fr))}
  @media(min-width:640px){.grid.cards{grid-template-columns:repeat(2,minmax(0,1fr))}}
  @media(min-width:960px){.grid.cards{grid-template-columns:repeat(3,minmax(0,1fr))}}

  .card{
    background:var(--card);border:1px solid var(--border);border-radius:14px;overflow:hidden;
    box-shadow: var(--shadow);
  }
  .card .cover {
  overflow: hidden; /* tránh ảnh tràn khi scale */
  position: relative;
}

  .card .cover img {
    transition: transform 0.4s ease, filter 0.4s ease;
  }

  .card:hover .cover img {
    transform: scale(1.05);
    filter: brightness(1.08);
  }

  .card .body{padding:14px}
  .title{font-weight:700;font-size:18px;line-height:1.35;margin:4px 0 6px}
  .excerpt{font-size:14px;color:var(--muted)}
  .meta{font-size:12px;color:var(--muted)}

  /* Button */
  .btn{
    min-width:110px;
    display:inline-flex;gap:8px;align-items:center;justify-content:center;
    padding:10px 14px;border-radius:12px;border:1px solid var(--brand);
    background: color-mix(in oklab, var(--brand) 16%, transparent);
    color: var(--text);cursor:pointer;
    transition: transform .16s ease, box-shadow .16s ease, background .16s ease, border-color .16s ease;
  }
  .btn:hover{
    transform: translateY(-1px);
    border-color: var(--brand-600);
    background: color-mix(in oklab, var(--brand) 26%, transparent);
    box-shadow: 0 10px 24px color-mix(in oklab, var(--brand) 30%, transparent);
  }
  .btn:active{transform: translateY(0)}
  .btn:focus-visible{outline:2px solid var(--brand);outline-offset:3px}

  .hr{height:1px;background:var(--border);margin:18px 0}

  /* =========================
     ẢNH TRONG BÀI — ANTI-DISTORT
     ========================= */
  .prose figure{margin:14px 0}
  .prose figcaption{margin-top:6px;font-size:0.92rem;color:var(--muted)}
  .prose figure img,
  .prose img{
    display:block;max-width:100%;height:auto;
    border-radius:12px;max-height:72vh;object-fit:contain;background: color-mix(in oklab, #000 85%, var(--card));
  }
  .prose img[width], .prose img[height]{width:auto !important;height:auto !important}
  #article > img{
    width:100%;max-height:440px;object-fit:cover;display:block;border-radius:12px;
    background: color-mix(in oklab, #000 85%, var(--card));
  }
  .rel-grid .card .cover img{
    width:100%;height:220px;object-fit:cover;display:block;border-radius:12px;
    background: color-mix(in oklab, #000 85%, var(--card));
  }

  /* Small polish for footer */
  footer.container{color:var(--muted)}
</style>

  {% block extra_head %}{% endblock %}
</head>
<body>
  <header class="header">
    <a class="brand" href="{% url 'home' %}">VN News</a>

    <div class="search">
      <form method="get" action="{% url 'home' %}">
        <input name="q" value="{{ request.GET.q|default:'' }}" placeholder="Tìm bài..." />
      </form>
    </div>

    <div>
      {% if request.user.is_authenticated %}
        <a class="btn" href="{% url 'submit_article' %}">Đăng bài</a>
        <a class="btn" href="{% url 'my_articles' %}" style="margin-left:6px">Bài của tôi</a>
        <a class="btn" href="{% url 'logout' %}" style="margin-left:6px">Đăng xuất</a>
      {% else %}
        <a class="btn" href="{% url 'login' %}">Đăng nhập</a>
        <a class="btn" href="{% url 'register' %}" style="margin-left:6px">Đăng ký</a>
      {% endif %}
    </div>
    <div id="progress-bar"></div>
  </header>
  



  <nav class="container nav">
    {% if categories %}
      {% for c in categories %}
        <a class="chip" href="{% url 'category' slug=c.slug %}">{{ c.name }}</a>
      {% endfor %}
    {% endif %}
  </nav>

  <main class="container">
    {% block content %}{% endblock %}
  </main>

  

  {% block extra_scripts %}{% endblock %}
  <script>
  window.addEventListener("scroll", function() {
    const docHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
    const scrolled = (scrollTop / docHeight) * 100;
    document.getElementById("progress-bar").style.width = scrolled + "%";
  });
</script>

</body>
</html>
